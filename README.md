# cheat_diary

Данный проект помогает автоматизировать процессы исправления плохих оценок, удаления негативных замечаний и создания хвалебных записей в электронном дневнике школьника.

## Установка

Поместите файл в директорию дневника, рядом с файлом `manage.py`.

Предполагается, что данный скрипт будет помещён на школьный сервер, где расположен электронный дневник и уже установлен python3.

Если же вы хотите протестировать проект у себя на компьютере, вам понадобится [репозиторий с кодом дневника](https://github.com/devmanorg/e-diary/tree/master), в котором вы найдёте собственный README.md, и заполненная база данных.

Должен быть установлен python3.
Затем используйте pip (или pip3, если есть конфликт с python2) для установки зависимостей из репозитория с кодом дневника:

```
pip install -r requirements.txt
```
или
```
pip3 install -r requirements.txt
```

Рекомендуется использовать venv для изоляции проекта.

## Запуск

### Общие приготовления

Для большей наглядности, сервер с базой данных следует запустить в отдельном окне консоли.
Находясь в директории, в которой располагается файл `manage.py`, наберите команду:

```
python3 manage.py runserver
```
После запуска дневник будет доступен по адресу http://127.0.0.1:8000.

### cheat.py

В консоли, находясь в директории, где расположен файл `manage.py`, запустите Django shell (оболочку) с помощью python3:
```
python3 manage.py shell
```
Затем загрузите в оболочку скрипт `cheat.py` с помощью команды `import`:
```
import cheat
```
Теперь, когда скрипт загружен, можно переходить к функционалу.

### Запуск всех функций скрипта с настройками по умолчанию:

- будет изменён профиль Фролова Ивана Григорьевича, ученика 6го А класса;
- все двойки и тройки будут заменены на пятёрки;
- все негативные замечания учителей будут удалены;
- будет случайным образом выбран один из предметов, и датой последнего прошедшего урока будет добавлена похвала от имени соответствующего учителя.

### main()

```
cheat.main()
```

### Избирательный запуск функций с альтернативными настройками:

Если вы захотите использовать лишь некоторые из доступных возможностей: поменять имя ученика или изменить оценки, или задать конкретный предмет для получения похвалы, то необходимо будет, для начала, произвести подготовительные действия.

Импортируйте модели с помощью команды:
```
from datacenter.models import (Schoolkid, Mark, Chastisement, Lesson, Subject, Commendation, Teacher)
```
Когда модели загружены, необходимо ввести ФИО ученика, даже если это будет всё тот же Фролов Иван Григорьевич. ФИО целиком не является строго обязательным условием, может хватить одного лишь имени, фамилии или отчества, или даже буквы, но только если они встречаются в базе единожды. Вводить ФИО следует строго в кавычках!
```
name = "Фролов Иван Григорьевич"
```

После того, как введено ФИО, необходимо проверить, загрузится ли с его помощью профиль ученика из базы дневника:
```
cheat.get_schoolkid(name)
```

Если ФИО не будет найдено или если оно будет повторяться в базе несколько раз, вылетит соответствующая ошибка. В этом случае, нужно будет повторить предыдущий шаг с назначением `name = "..."`, указав актуальные и достаточные данные. В случае успеха, в консоль выведется похожее сообщение (с поправкой на ФИО и класс): `<Schoolkid: Фролов Иван Григорьевич 6А>`.

Имя проверено. Теперь можно вводить следующую команду, чтобы загрузить профиль ученика:
```
schoolkid = Schoolkid.objects.get(full_name__contains=name)
```

## fix_marks()

Чтобы заменить все двойки и тройки на пятёрки, запустите в оболочке следующую команду:
```
cheat.fix_marks(schoolkid)
```

## remove_chastisements()

Чтобы удалить негативные замечания учителей, запустите в оболочке следующую команду:
```
cheat.remove_chastisements(schoolkid)
```

## create_commendation()

Чтобы создать хвалебную запись по случайному предмету, запустите в оболочке следующую команду:
```
cheat.create_commendation(schoolkid)
```
Если хотите самостоятельно выбрать предмет, добавьте его название в команду следующим образом:
```
cheat.create_commendation(schoolkid, "Математика")
```

## Цель проекта

Код написан в образовательных целях на онлайн-курсе для веб-разработчиков https://dvmn.org/.
